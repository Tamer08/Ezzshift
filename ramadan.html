<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø¥Ù…Ø³Ø§ÙƒÙŠØ© Ø±Ù…Ø¶Ø§Ù† 1447</title>

<style>
*{box-sizing:border-box}
body{margin:0;font-family:Tahoma,Arial;background:#fff;color:#000}
.container{padding:15px;max-width:500px;margin:auto}
.header{text-align:center;margin-bottom:15px}
.header h1{margin:0;font-size:26px;font-weight:800;color:#FEA500}
.header p{margin-top:5px;color:#666}

.days-grid{display:grid;grid-template-columns:repeat(5,1fr);gap:8px;margin-bottom:20px}
.day-cell{
 position:relative;background:#F6F6F6;border:1.5px solid #F0C36D;
 border-radius:10px;padding:12px 0 10px;text-align:center;
 font-weight:bold;cursor:pointer;user-select:none
}
.day-cell.active,.day-cell:hover{background:#FEA500;color:#fff;border-color:#FEA500}

.today-badge-grid{
 position:absolute;top:-8px;right:6px;background:#FEA500;
 color:#fff;font-size:10px;padding:2px 6px;border-radius:10px
}
.today-dot{
 width:6px;height:6px;background:#FEA500;border-radius:50%;
 margin:6px auto 0;animation:pulse 1.6s infinite
}
@keyframes pulse{
 0%{transform:scale(1)}
 50%{transform:scale(1.4);opacity:.6}
 100%{transform:scale(1)}
}

.day-card{
 position:relative;background:#FFF4DD;border:2px solid #FEA500;
 border-radius:20px;padding:20px;margin-bottom:18px
}
.today-badge{
 position:absolute;top:-10px;right:16px;background:#FEA500;
 color:#fff;font-size:12px;padding:4px 10px;border-radius:12px
}
.day-title{text-align:center;font-weight:bold;color:#FEA500;margin-bottom:12px;font-size:15px}

.times{display:flex;gap:10px}
.time-box{
 flex:1;background:#fff;border-radius:12px;padding:10px 6px;
 text-align:center;border:1px solid #F0C36D
}
.time-box.maghrib{background:#F2F2F2;border-color:#FEA500}
.time-box div:first-child{font-size:13px;font-weight:800;color:#FEA500;margin-bottom:4px}
.time-box div:last-child{font-size:15px;font-weight:bold}

.footer{text-align:center;font-size:13px;color:#666}

/* ===== Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø®Ø§Øµ Ø¨Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ ===== */
@media screen and (max-width: 768px) {
    /* Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ */
    .header h1 {
        white-space: nowrap;
        font-size: 6.5vw !important;
    }

    /* ØªÙØ§ØµÙŠÙ„ Ø§Ù„ÙŠÙˆÙ… Ø¯Ø§Ø®Ù„ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© (Ø§Ù„ÙŠÙˆÙ… - Ø§Ù„ØªØ§Ø±ÙŠØ® - Ø±Ù‚Ù… Ø±Ù…Ø¶Ø§Ù†) */
    .day-title {
        white-space: nowrap;
        font-size: 3.5vw !important; /* Ø­Ø¬Ù… ØµØºÙŠØ± Ù†Ø³Ø¨ÙŠØ§Ù‹ Ù„ÙŠØ³Ø¹ Ø§Ù„Ù†Øµ Ø§Ù„Ø·ÙˆÙŠÙ„ */
    }

    /* Ø¹Ù†Ø§ÙˆÙŠÙ† Ø§Ù„Ø£ÙˆÙ‚Ø§Øª (Ø¥Ù…Ø³Ø§ÙƒØŒ ÙØ¬Ø±ØŒ Ù…ØºØ±Ø¨) */
    .time-box div:first-child {
        white-space: nowrap;
        font-size: 3.5vw !important;
    }

    /* Ù‚ÙŠÙ… Ø§Ù„ÙˆÙ‚Øª (Ø§Ù„Ø³Ø§Ø¹Ø©) */
    .time-box div:last-child {
        white-space: nowrap;
        font-size: 4.5vw !important;
    }
    
    /* Ù…Ù†Ø¹ Ø§Ù„ØªÙØ§Ù ØµÙ†Ø§Ø¯ÙŠÙ‚ Ø§Ù„ÙˆÙ‚Øª */
    .times {
        flex-wrap: nowrap;
    }
}
</style>
</head>

<body>
<div class="container">
  <div class="header">
    <h1>ğŸŒ™ Ø¥Ù…Ø³Ø§ÙƒÙŠØ© Ø±Ù…Ø¶Ø§Ù† 1447 Ù‡Ù€</h1>
    <p>Ø§Ø®ØªØ± ÙŠÙˆÙ…Ù‹Ø§ Ù…Ù† Ø§Ù„Ø£ÙŠØ§Ù…</p>
  </div>

  <div class="days-grid" id="daysGrid"></div>
  <div id="cardContainer"></div>
  <div class="footer" id="location"></div>
</div>

<script>
/* ========= Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ========= */
const city="Cairo";
const country="Egypt";
const hijriYear=1447;
const ramadanMonth=9;
const STORAGE_KEY="ramadan_1447_cairo";

const monthsAr=[
 "ÙŠÙ†Ø§ÙŠØ±","ÙØ¨Ø±Ø§ÙŠØ±","Ù…Ø§Ø±Ø³","Ø£Ø¨Ø±ÙŠÙ„","Ù…Ø§ÙŠÙˆ","ÙŠÙˆÙ†ÙŠÙˆ",
 "ÙŠÙˆÙ„ÙŠÙˆ","Ø£ØºØ³Ø·Ø³","Ø³Ø¨ØªÙ…Ø¨Ø±","Ø£ÙƒØªÙˆØ¨Ø±","Ù†ÙˆÙÙ…Ø¨Ø±","Ø¯ÙŠØ³Ù…Ø¨Ø±"
];

/* ========= ØªØ­ÙˆÙŠÙ„ Ø§Ù„ÙˆÙ‚Øª (ØªØµØ­ÙŠØ­ NaN) ========= */
function to12(time){
 if(!time) return "--:--";
 time=time.split(" ")[0]; // Ø¥Ø²Ø§Ù„Ø© (EET)
 let [h,m]=time.split(":").map(Number);
 if(isNaN(h)||isNaN(m)) return "--:--";
 const p=h>=12?"Ù…":"Øµ";
 h=h%12||12;
 return `${h}:${m.toString().padStart(2,"0")} ${p}`;
}

/* ========= Ø§Ù„Ø¹Ø±Ø¶ ========= */
function render(days){
 const grid=document.getElementById("daysGrid");
 const card=document.getElementById("cardContainer");
 const todayStr=new Date().toDateString();
 grid.innerHTML="";

 document.getElementById("location").innerText=
  `Ø§Ù„ØªÙˆÙ‚ÙŠØª Ø§Ù„Ù…Ø­Ù„ÙŠ â€” ${city}, ${country}`;

 days.forEach(d=>{
  const g=d.date.gregorian;
  
  // === Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„ØªØ¹Ø¯ÙŠÙ„: ØªØµØ­ÙŠØ­ Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„ØªØ§Ø±ÙŠØ® ===
  // Ø§Ù„ØªØ§Ø±ÙŠØ® ÙŠØ£ØªÙŠ Ø¨ØµÙŠØºØ© ÙŠÙˆÙ…-Ø´Ù‡Ø±-Ø³Ù†Ø©ØŒ Ù„Ø°Ø§ Ù†ÙÙƒÙƒÙ‡ ÙˆÙ†Ø¹ÙŠØ¯ ØªØ±ÙƒÙŠØ¨Ù‡ Ù„Ù„ØªØ£ÙƒØ¯
  const [dd, mm, yyyy] = g.date.split('-').map(Number);
  const isToday = new Date(yyyy, mm - 1, dd).toDateString() === todayStr;
  // === Ù†Ù‡Ø§ÙŠØ© Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ ===

  const cell=document.createElement("div");
  cell.className="day-cell"+(isToday?" active":"");
  cell.innerHTML=`
   ${isToday?`<div class="today-badge-grid">Ø§Ù„ÙŠÙˆÙ…</div>`:""}
   ${d.date.hijri.day}
   ${isToday?`<div class="today-dot"></div>`:""}
  `;

  cell.onclick=()=>{
   document.querySelectorAll(".day-cell")
    .forEach(c=>c.classList.remove("active"));
   cell.classList.add("active");

   const formattedGregorian=
    `${g.day} ${monthsAr[g.month.number-1]} ${g.year}`;

   card.innerHTML=`
    <div class="day-card">
     ${isToday?`<div class="today-badge">Ø§Ù„ÙŠÙˆÙ…</div>`:""}
     <div class="day-title">
      ${d.date.hijri.weekday.ar} â€”
      ${formattedGregorian} â€”
      ${d.date.hijri.day} Ø±Ù…Ø¶Ø§Ù†
     </div>

     <div class="times">
      <div class="time-box">
       <div>Ø§Ù„Ø¥Ù…Ø³Ø§Ùƒ</div>
       <div>${to12(d.timings.Imsak)}</div>
      </div>
      <div class="time-box">
       <div>Ø§Ù„ÙØ¬Ø±</div>
       <div>${to12(d.timings.Fajr)}</div>
      </div>
      <div class="time-box maghrib">
       <div>Ø§Ù„Ù…ØºØ±Ø¨</div>
       <div>${to12(d.timings.Maghrib)}</div>
      </div>
     </div>
    </div>
   `;
  };

  grid.appendChild(cell);
  if(isToday) cell.click();
 });
}

/* ========= ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª (Ø£ÙˆÙ†Ù„Ø§ÙŠÙ† / Ø£ÙˆÙÙ„Ø§ÙŠÙ†) ========= */
function loadData(){
 const cached=localStorage.getItem(STORAGE_KEY);
 if(cached){
  render(JSON.parse(cached));
  return;
 }

 fetch(`https://api.aladhan.com/v1/hijriCalendarByCity?city=${city}&country=${country}&month=${ramadanMonth}&year=${hijriYear}&method=5`)
  .then(r=>r.json())
  .then(j=>{
   localStorage.setItem(STORAGE_KEY,JSON.stringify(j.data));
   render(j.data);
  })
  .catch(()=>{
   document.getElementById("cardContainer").innerHTML=
    "<p style='text-align:center;color:red'>Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¥Ù†ØªØ±Ù†Øª ÙˆÙ„Ø§ Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­ÙÙˆØ¸Ø©</p>";
  });
}

loadData();
</script>

</body>
</html>