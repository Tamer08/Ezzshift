<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø£ÙˆÙ‚Ø§Øª Ø§Ù„ØµÙ„Ø§Ø©</title>

<style>
*{box-sizing:border-box}
body{margin:0;font-family:Tahoma,Arial;background:#fff;color:#000}
.container{min-height:100vh;padding:15px;display:flex;justify-content:center;align-items:center}
.card{
 width:100%;max-width:420px;background:#E6E6E6;border-radius:20px;
 padding:20px;border:1px solid #D0D0D0;box-shadow:0 8px 20px rgba(0,0,0,.12)
}
h1{text-align:center;font-size:24px;margin:0 0 10px;color:#D48B00;font-weight:800}

/* ===== Ø³Ø§Ø¹Ø© Ø§Ø­ØªØ±Ø§ÙÙŠØ© Ù…ØªÙ†Ø§Ø³Ù‚Ø© ===== */
.countdown{
 display:flex;
 justify-content:center;
 align-items:center;
 gap:12px;
 margin-bottom:15px;
 font-family:'Tahoma',Arial
}
.next-prayer{
 font-size:16px;
 font-weight:bold;
 color:#D48B00
}
.led{
 display:flex;
 gap:8px;
 background:#f7f7f7;
 padding:6px 12px;
 border-radius:10px;
 border:1px solid #d6d6d6;
 box-shadow:inset 0 0 6px rgba(0,0,0,.08)
}
.unit{
 display:flex;
 align-items:baseline;
 gap:3px
}
.unit span{
 font-size:17px;
 font-weight:bold;
 color:#333;
 min-width:22px;
 text-align:center
}
.unit small{
 font-size:11px;
 color:#888
}
.sep{
 font-weight:bold;
 color:#aaa;
 padding:0 2px
}

.prayer{
 display:flex;justify-content:space-between;align-items:center;
 padding:14px;margin-bottom:10px;background:#fff;border-radius:14px;
 font-size:16px;border:1px solid #d6d6d6
}
.prayer span:last-child{font-weight:bold}
.prayer.active{background:#FEA500;color:#fff;border-color:#FEA500}

.footer{text-align:center;margin-top:12px;font-size:14px;color:#666}

/* ================== Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø®Ø§Øµ Ø¨Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ ================== */
@media screen and (max-width: 768px) {
    /* Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ */
    h1 {
        white-space: nowrap;
        font-size: 7vw !important;
    }

    /* Ø§Ø³Ù… Ø§Ù„ØµÙ„Ø§Ø© Ø§Ù„Ù‚Ø§Ø¯Ù…Ø© ÙÙŠ Ø§Ù„Ø¹Ø¯Ø§Ø¯ */
    .next-prayer {
        white-space: nowrap;
        font-size: 4.5vw !important;
    }

    /* Ø£Ø±Ù‚Ø§Ù… Ø§Ù„Ø¹Ø¯Ø§Ø¯ (Ø³Ø§Ø¹Ø§ØªØŒ Ø¯Ù‚Ø§Ø¦Ù‚ØŒ Ø«ÙˆØ§Ù†ÙŠ) */
    .unit span {
        font-size: 5.5vw !important;
    }
    
    /* Ø§Ù„Ù†ØµÙˆØµ Ø§Ù„ØµØºÙŠØ±Ø© ÙÙŠ Ø§Ù„Ø¹Ø¯Ø§Ø¯ (Ø³ØŒ Ø¯ØŒ Ø«) */
    .unit small {
        font-size: 3vw !important;
    }

    /* Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„ØµÙ„ÙˆØ§Øª ÙˆØ£ÙˆÙ‚Ø§ØªÙ‡Ø§ ÙÙŠ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© */
    .prayer span {
        white-space: nowrap;
        font-size: 4.5vw !important;
    }

    /* Ø§Ù„ÙÙˆØªØ± (Ø§Ù„ØªØ§Ø±ÙŠØ® ÙˆØ§Ù„Ù…ÙˆÙ‚Ø¹) */
    .footer {
        white-space: nowrap;
        font-size: 3.5vw !important;
    }
}
</style>
</head>

<body>

<div class="container">
  <div class="card">
    <h1>ğŸ•Œ Ø£ÙˆÙ‚Ø§Øª Ø§Ù„ØµÙ„Ø§Ø©</h1>

    <div class="countdown" id="countdown">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>

    <div id="prayers"></div>
    <div class="footer" id="location"></div>
  </div>
</div>

<script>
const city="Cairo";
const country="Egypt";
const STORAGE_KEY="prayer_times_cairo";

const prayerOrder=[
 {key:"Fajr",name:"Ø§Ù„ÙØ¬Ø±"},
 {key:"Sunrise",name:"Ø§Ù„Ø´Ø±ÙˆÙ‚"},
 {key:"Dhuhr",name:"Ø§Ù„Ø¸Ù‡Ø±"},
 {key:"Asr",name:"Ø§Ù„Ø¹ØµØ±"},
 {key:"Maghrib",name:"Ø§Ù„Ù…ØºØ±Ø¨"},
 {key:"Isha",name:"Ø§Ù„Ø¹Ø´Ø§Ø¡"}
];

let prayerTimes={};

function getArabicDate(){
 const days=["Ø§Ù„Ø£Ø­Ø¯","Ø§Ù„Ø¥Ø«Ù†ÙŠÙ†","Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡","Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡","Ø§Ù„Ø®Ù…ÙŠØ³","Ø§Ù„Ø¬Ù…Ø¹Ø©","Ø§Ù„Ø³Ø¨Øª"];
 const months=["ÙŠÙ†Ø§ÙŠØ±","ÙØ¨Ø±Ø§ÙŠØ±","Ù…Ø§Ø±Ø³","Ø£Ø¨Ø±ÙŠÙ„","Ù…Ø§ÙŠÙˆ","ÙŠÙˆÙ†ÙŠÙˆ","ÙŠÙˆÙ„ÙŠÙˆ","Ø£ØºØ³Ø·Ø³","Ø³Ø¨ØªÙ…Ø¨Ø±","Ø£ÙƒØªÙˆØ¨Ø±","Ù†ÙˆÙÙ…Ø¨Ø±","Ø¯ÙŠØ³Ù…Ø¨Ø±"];
 const now=new Date();
 return `${days[now.getDay()]} ${now.getDate()} ${months[now.getMonth()]} ${now.getFullYear()}`;
}

function cleanTime(t){
 if(!t) return null;
 return t.split(" ")[0];
}

function to12(t){
 t=cleanTime(t);
 if(!t) return "--:--";
 let[h,m]=t.split(":").map(Number);
 const p=h>=12?"Ù…":"Øµ";
 h=h%12||12;
 return `${h}:${m.toString().padStart(2,"0")} ${p}`;
}

function renderPrayers(active=null){
 const box=document.getElementById("prayers");
 box.innerHTML="";
 prayerOrder.forEach(p=>{
  const div=document.createElement("div");
  div.className="prayer"+(p.key===active?" active":"");
  div.innerHTML=`
   <span>${p.name}</span>
   <span>${to12(prayerTimes[p.key])}</span>
  `;
  box.appendChild(div);
 });
}

function updateCountdown(){
 const now=new Date();
 let nextPrayer,nextTime;

 for(let p of prayerOrder){
  const tStr=cleanTime(prayerTimes[p.key]);
  if(!tStr) continue;
  const [h,m]=tStr.split(":").map(Number);
  const t=new Date();
  t.setHours(h,m,0,0);
  if(t>now){nextPrayer=p;nextTime=t;break;}
 }

 if(!nextPrayer){
  nextPrayer=prayerOrder[0];
  const [h,m]=cleanTime(prayerTimes[nextPrayer.key]).split(":").map(Number);
  nextTime=new Date();
  nextTime.setDate(nextTime.getDate()+1);
  nextTime.setHours(h,m,0,0);
 }

 const diff=nextTime-now;
 const h=String(Math.floor(diff/3600000)).padStart(2,"0");
 const m=String(Math.floor(diff%3600000/60000)).padStart(2,"0");
 const s=String(Math.floor(diff%60000/1000)).padStart(2,"0");

 document.getElementById("countdown").innerHTML=`
  <div class="next-prayer">${nextPrayer.name}</div>
  <div class="led">
    <div class="unit"><span>${h}</span><small>Ø³</small></div>
    <div class="sep">:</div>
    <div class="unit"><span>${m}</span><small>Ø¯</small></div>
    <div class="sep">:</div>
    <div class="unit"><span>${s}</span><small>Ø«</small></div>
  </div>
 `;

 renderPrayers(nextPrayer.key);
}

function load(){
 const cached=localStorage.getItem(STORAGE_KEY);
 if(cached){
  prayerTimes=JSON.parse(cached);
  document.getElementById("location").innerHTML=
   `ØªÙˆÙ‚ÙŠØª ${city} - ${country}<br>${getArabicDate()}`;
  renderPrayers();
  updateCountdown();
  setInterval(updateCountdown,1000);
  return;
 }

 fetch(`https://api.aladhan.com/v1/timingsByCity?city=${city}&country=${country}&method=5`)
  .then(r=>r.json())
  .then(j=>{
   prayerTimes=j.data.timings;
   localStorage.setItem(STORAGE_KEY,JSON.stringify(prayerTimes));
   document.getElementById("location").innerHTML=
    `ØªÙˆÙ‚ÙŠØª ${city} - ${country}<br>${getArabicDate()}`;
   renderPrayers();
   updateCountdown();
   setInterval(updateCountdown,1000);
  });
}

load();
</script>

</body>
</html>